<div class="row pull-right" id="bread">
    <ol class="breadcrumb breadcrumb-arrow">
        <li><a href="#">Human Resource Management</a></li>
        <li class="active"><span>Shift Details</span></li>
    </ol>
</div>


<p-accordion>
    <p-accordionTab header="Shift Details" class="card" [selected]="true">
        <!-- the farmers report code -->
        <form [formGroup]="shiftForm">
            <div class="row pl-3 pr-3 ml-2 mr-2 mt-2 maindiv">
                <div class=" col-md-12 cleartop">
                    <div class="row pl-1 pr-1">
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Date of Entry</span>
                                <input matInput class="form-control border-bottom-1" #entryDateInput
                                    formControlName="entryDate" placeholder="Please Select Date Of Entry"
                                    [matDatepicker]="eDate">
                                <mat-datepicker-toggle class="date-picker-icon-position" matSuffix [for]="eDate">
                                </mat-datepicker-toggle>
                                <mat-datepicker #eDate>
                                </mat-datepicker>
                                <span *ngIf="shiftForm.controls.entryDate.errors?.required
                                    && shiftForm.controls.entryDate.touched" class="error-span">Date of Entry is
                                    required
                                    field.
                                </span>
                            </div>

                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Login User Name</span>
                                <input type="text" formControlName="enteredBy" placeholder="Login User Name"
                                    class="form-control">
                            </div>
                        </div>

                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Effective Date</span>
                                <input matInput class="form-control border-bottom-1" #entryDateInput
                                    formControlName="shiftEffectiveDate" placeholder="Please Select Effective Date"
                                    placeholder="Please Select Shift Effective Date" [matDatepicker]="effectiveDate">
                                <mat-datepicker-toggle class="date-picker-icon-position" matSuffix
                                    [for]="effectiveDate">
                                </mat-datepicker-toggle>
                                <mat-datepicker #effectiveDate>
                                </mat-datepicker>
                                <span *ngIf="shiftForm.controls.shiftEffectiveDate.invalid
                                    &&
                                    shiftForm.controls.shiftEffectiveDate.touched" class="error-span">Shift Effective
                                    Date is required field.</span>
                            </div>
                        </div>
                    </div>

                    <div class="row pl-1 pr-1 mb-4">
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Name</span>
                                <input type="text" placeholder="Please Enter Shift Name" class="form-control"
                                    maxlength="30" formControlName="shiftName" />
                                <span *ngIf="shiftForm.controls.shiftName.errors?.required
                                &&
                                shiftForm.controls.shiftName.touched" class="error-span">Shift Name is required field.
                                </span>
                            </div>
                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Time From </span>
                                <input type="text" placeholder="Please Select Shift Time From" class="form-control"
                                    formControlName="shiftTimeFrom" (focusout)="shiftTimeChange()" />

                                <span *ngIf="shiftForm.controls.shiftTimeFrom.errors?.required
                                &&
                                shiftForm.controls.shiftTimeFrom.touched" class="error-span">Shift Time From is
                                    required field.
                                </span>
                                <span
                                    *ngIf="shiftForm.controls.shiftTimeFrom.touched && shiftForm.controls.shiftTimeFrom.errors?.pattern"
                                    class="error-span">Shift Time From should be numerics only in XX:XX time
                                    format</span>
                            </div>
                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Time To</span>
                                <input type="text" placeholder="Please Select Shift Time To" class="form-control"
                                    formControlName="shiftTimeTo" (focusout)="shiftTimeChange()" />

                                <span *ngIf="shiftForm.controls.shiftTimeTo.errors?.required
                                &&
                                shiftForm.controls.shiftTimeTo.touched" class="error-span">Shift Time To is required
                                    field.
                                </span>
                                <span
                                    *ngIf="shiftForm.controls.shiftTimeTo.touched && shiftForm.controls.shiftTimeTo.errors?.pattern"
                                    class="error-span">Shift Time To should be numerics only in XX:XX time
                                    format</span>
                            </div>
                        </div>
                    </div>


                    <div class="row pl-1 pr-1 mb-4">

                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Duration (hrs)</span>
                                <input type="text" placeholder="Shift Duration" class="form-control"
                                    formControlName="shiftDuration" />

                            </div>
                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Break Time From</span>
                                <input type="text" placeholder="Please Select Break Time From" class="form-control"
                                    formControlName="shiftBreakTimeFrom" (focusout)="breakTimeChange()" />

                                <span *ngIf="shiftForm.controls.shiftBreakTimeFrom.errors?.required
                                &&
                                shiftForm.controls.shiftBreakTimeFrom.touched" class="error-span">Shift Break Time From
                                    is required field.
                                </span>
                                <span
                                    *ngIf="shiftForm.controls.shiftBreakTimeFrom.touched && shiftForm.controls.shiftBreakTimeFrom.errors?.pattern"
                                    class="error-span">Shift Break Time From should be numerics only in XX:XX time
                                    format</span>
                            </div>
                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Break Time To</span>
                                <input type="text" placeholder="Please Select Break Time To" class="form-control"
                                    formControlName="shiftBreakTimeTo" (focusout)="breakTimeChange()" />

                                <span *ngIf="shiftForm.controls.shiftBreakTimeTo.errors?.required
                                &&
                                shiftForm.controls.shiftBreakTimeTo.touched" class="error-span">Shift Break Time To is
                                    required field.
                                </span>
                                <span
                                    *ngIf="shiftForm.controls.shiftBreakTimeTo.touched && shiftForm.controls.shiftBreakTimeTo.errors?.pattern"
                                    class="error-span">Shift Break Time To should be numerics only in XX:XX time
                                    format</span>
                            </div>
                        </div>
                    </div>

                    <div class="row pl-1 pr-1 mb-4">

                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Break Duration</span>
                                <input type="text" placeholder="Shift Break Duration" class="form-control"
                                    formControlName="shiftBreakDuration" />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Shift Rotation</span>
                                <mat-select class="form-control" placeholder="Please Select Shift Rotation"
                                    formControlName="ShiftRotation">
                                    <mat-option value="YES">YES</mat-option>
                                    <mat-option value="NO">NO</mat-option>
                                </mat-select>
                                <span *ngIf="shiftForm.controls.ShiftRotation.errors?.required
                                &&
                                shiftForm.controls.ShiftRotation.touched" class="error-span">Shift Rotation is
                                    required field.
                                </span>
                            </div>
                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Rotation Days</span>
                                <input type="text" (focusout)="focusOutShiftRotationDay()"
                                    placeholder="Please Enter Shift Rotation Days" class="form-control"
                                    formControlName="shiftRotationDays" maxlength="3"
                                    onkeypress="return (event.charCode >= 48 && event.charCode <= 57 ) " />
                                <span *ngIf="shiftForm.controls.shiftRotationDays.errors?.required
                                &&
                                shiftForm.controls.shiftRotationDays.touched" class="error-span">Shift Rotation Days is
                                    required field.
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="row pl-1 pr-1 mb-4">


                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Shift Cancellation</span>
                                <mat-select class="form-control" #shiftCanelSelect
                                    placeholder="Please Select Shift Cancellation" (focusout)="focusOutShiftCancel()"
                                    formControlName="shiftStatus">
                                    <mat-option value="Active">Active</mat-option>
                                    <mat-option value="Cancel">Cancel</mat-option>
                                </mat-select>
                                <span *ngIf="showStatusError" class="error-span">Shift Rotation Days is
                                    required field.
                                </span>
                            </div>
                        </div>

                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Shift Cancellation From Date</span>
                                <input matInput class="form-control border-bottom-1"
                                    formControlName="shiftCancellationEffectiveFromDate"
                                    placeholder="Please Select Cancellation Date"
                                    (dateChange)="cancellationDateChange($event)"
                                    (focusout)="cancellationDateChange($event)" [matDatepicker]="cDate" />
                                <mat-datepicker-toggle class="date-picker-icon-position" matSuffix [for]="cDate">
                                </mat-datepicker-toggle>
                                <mat-datepicker #cDate>
                                </mat-datepicker>
                                <span *ngIf="showCancelDateError" class="error-span">Date of Cancellation is
                                    required
                                    field.
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </p-accordionTab>
</p-accordion>


<p-accordion>
    <p-accordionTab header="Shift Details" class="card" [selected]="true">
        <div class="row pl-3 pr-3 ml-2 mr-2 mt-2 maindiv">
            <div class=" col-md-12 cleartop">
                <table class="table table-striped table-bordered
                                dt-responsive nowrap mt-2" cellspacing="0" cellpadding="4" id="grdOrganizations">
                    <tbody>
                        <tr>
                            <th>Sl No</th>
                            <th>Shift Effective Date</th>
                            <th>Shift Name</th>
                            <th>Shift From to Shift To</th>
                            <th>Shift Duration</th>
                            <th>Shift Break From to To</th>
                            <th>Break Duration</th>
                            <th>Rotation</th>
                            <th>Rotation Days</th>
                            <th>Shift Status</th>
                            <th>Suspension Date</th>
                        </tr>
                        <ng-container *ngFor="let shift of
                        shiftList; let i= index">
                            <tr *ngIf="min <= i && max > i" (click)="rowSelected(shift)"
                                [class.active]="shift.shiftNo === selectedRowShiftNo && isModifyMode">
                                <td class="text-align-center">
                                    <span>{{i + 1}}</span>
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftEffectiveDate | date:'dd-MMM-yyyy' }}
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftName}}
                                </td>
                                <td class="text-align-center">
                                    {{shift. shiftTimeFrom}} - {{shift.shiftTimeTo}}
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftDuration}}
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftBreakTimeFrom}} - {{shift.shiftBreakTimeTo}}
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftBreakDuration}}
                                </td>
                                <td class="text-align-center">
                                    {{shift.ShiftRotation}}
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftRotationDays}}
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftStatus == null ? 'Active': shift.shiftStatus}}
                                </td>
                                <td class="text-align-center">
                                    {{shift.shiftCancellationEffectiveFromDate | date:'dd-MMM-yyyy'}}
                                </td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
                <p-paginator [rows]="10" [totalRecords]="shiftList.length" (onPageChange)="paginate($event)">
                </p-paginator>
            </div>
        </div>
    </p-accordionTab>
</p-accordion>


<div class="mgt-20 pull-right">

    <div class="row pull-right btSection">
        <div class="col-md12">
            <button pButton type="submit" [disabled]="disableNewButton" (click)="onNewShiftClick()"
                label="New Shift Details" class="ui-button-rounded"></button>
            <button pButton type="submit" [disabled]="disableCancelButton" (click)="onCancelClick()"
                label="Shift Cancellation" class="ui-button-rounded"></button>
            <button pButton type="submit" #saveButton
                [disabled]="disableSaveButton || !shiftForm.valid || this.showStatusError || this.showCancelDateError"
                (click)="onSave()" label="Save" class="ui-button-rounded"></button>
            <button pButton type="submit" [disabled]="disableModButton" (click)="onModClick()" label="Modify"
                class="ui-button-rounded"></button>
            <!-- <button pButton type="submit" [disabled]="disableClearButton" (click)="onClearClick()" label="Clear"
                class="ui-button-rounded"></button> -->
            <button pButton type="submit" (click)="onClearClick()" label="Clear" class="ui-button-rounded"></button>
        </div>
    </div>
</div>