<div class="row pull-right" id="bread">
    <ol class="breadcrumb breadcrumb-arrow">
        <li><a href="#">Human Resource Management</a></li>
        <li class="active"><span>Attendance Punch Details</span></li>
    </ol>
</div>
<div class="breadcrumb-height"></div>

<form [formGroup]="attendancePunchDetailsForm">
    <p-accordion>
        <p-accordionTab header="Attendance Punch Details" class="card" [selected]="true">
            <!-- the farmers report code -->
            <div class="row pl-3 pr-3 ml-2 mr-2 mt-2 maindiv">
                <div class=" col-md-12 cleartop">
                    <div class="row pl-1 pr-1">
                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Login User Name</span>
                                <input type="text" class="form-control" formControlName="loginUserName" disabled>
                            </div>
                        </div>

                        <div class="col-xs-4 col-sm-4 col-md-4">
                            <div class=" form-group">
                                <span class="label-control">Attedance Details Date</span>
                                <input [matDatepicker]="dpas" placeholder="Please enter Date of entry" matInput class="form-control
                                        border-bottom-1" formControlName="dateOfEntry"
                                    (blur)="goToOrganisation($event)" #attendanceDate>
                                <mat-datepicker-toggle class="date-picker-icon-position" matSuffix [for]="dpas">
                                </mat-datepicker-toggle>
                                <mat-datepicker #dpas>
                                </mat-datepicker>
                                <span *ngIf="attendancePunchDetailsForm.controls.dateOfEntry.errors?.required
                                &&
                                attendancePunchDetailsForm.controls.dateOfEntry.touched" class="error-span">Attedance
                                    Details Date is
                                    required field.
                                </span>
                            </div>

                        </div>


                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Punching Category </span>
                                <mat-select class="form-control" placeholder="Please enter Punching Category"
                                    formControlName="punchingCategory">
                                    <mat-option value="Attended">
                                        Attended
                                    </mat-option>
                                    <mat-option value="Single Punch">
                                        Single Punch
                                    </mat-option>
                                    <mat-option value="Total Missed">
                                        Total Missed
                                    </mat-option>
                                </mat-select>
                                <span *ngIf="attendancePunchDetailsForm.controls.punchingCategory.errors?.required
                                &&
                                attendancePunchDetailsForm.controls.punchingCategory.touched"
                                    class="error-span">Punching
                                    Category is
                                    required field.
                                </span>
                            </div>
                        </div>

                    </div>
                    <div class="row pl-1 pr-1 mb-4">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Details for
                                </span>
                                <mat-select class="form-control" placeholder="Please enter Details for"
                                    formControlName="detailsFor">
                                    <mat-option value="ALL">
                                        ALL
                                    </mat-option>
                                    <mat-option value="Regular">
                                        Regular
                                    </mat-option>
                                    <mat-option value="General">
                                        General
                                    </mat-option>
                                </mat-select>
                                <span *ngIf="attendancePunchDetailsForm.controls.detailsFor.errors?.required
                                &&
                                attendancePunchDetailsForm.controls.detailsFor.touched" class="error-span">Details
                                    for is
                                    required field.
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Organisation
                                </span>
                                <mat-select class="form-control" placeholder="Please enter Organisation"
                                    formControlName="organisation" #orgazation (ngModelChange)="getfieldStaff($event)">
                                    <mat-option *ngFor="let location of locationDetails" [value]="location.orgOfficeNo">
                                        {{location.orgOfficeName}}
                                    </mat-option>
                                </mat-select>
                                <span *ngIf="attendancePunchDetailsForm.controls.organisation.errors?.required
                                &&
                                attendancePunchDetailsForm.controls.organisation.touched"
                                    class="error-span">Organisation is
                                    required field.
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Department
                                </span>
                                <mat-select class="form-control" placeholder="Please enter Department"
                                    formControlName="department">
                                    <mat-option *ngFor="let department of departmentList"
                                        [value]="department.departmentCode">
                                        {{department.departMentName}}
                                    </mat-option>
                                </mat-select>
                                <span *ngIf="attendancePunchDetailsForm.controls.department.errors?.required
                                &&
                                attendancePunchDetailsForm.controls.department.touched" class="error-span">Department
                                    is
                                    required field.
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row pl-1 pr-1 mb-4">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Gender
                                </span>
                                <mat-select class="form-control" placeholder="Please Gender" formControlName="gender">
                                    <mat-option value="ALL">
                                        ALL
                                    </mat-option>
                                    <mat-option value="Male">
                                        Male
                                    </mat-option>
                                    <mat-option value="Female">
                                        Female
                                    </mat-option>
                                </mat-select>
                                <span *ngIf="attendancePunchDetailsForm.controls.gender.errors?.required
                                &&
                                attendancePunchDetailsForm.controls.gender.touched" class="error-span">Gender is
                                    required field.
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Division
                                </span>
                                <mat-select class="form-control" placeholder="Please Division"
                                    formControlName="division">
                                    <mat-option value="ALL">
                                        ALL
                                    </mat-option>
                                    <mat-option value="Staff">
                                        Staff
                                    </mat-option>
                                    <mat-option value="Worker">
                                        Worker
                                    </mat-option>
                                </mat-select>
                                <span *ngIf="attendancePunchDetailsForm.controls.division.errors?.required
                                &&
                                attendancePunchDetailsForm.controls.division.touched" class="error-span">Division is
                                    required field.
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Biometric Id
                                </span>
                                <input type="text" formControlName="biometricId" class="form-control" maxlength="10"
                                    placeholder="Please enter biometric Id">
                            </div>
                        </div>
                    </div>
                    <div class="row pl-1 pr-1 mb-4">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="label-control">Filter</span>
                                <mat-select class="form-control" formControlName="filter" placeholder="Select Filter">
                                    <mat-option value="Time">Time</mat-option>
                                    <mat-option value="Id">Id</mat-option>
                                </mat-select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </p-accordionTab>
    </p-accordion>
</form>




<p-accordion>
    <p-accordionTab [header]="recordCount" class="card" [selected]="true">
        <div class="row pl-3 pr-3 ml-2 mr-2 mt-2 maindiv">
            <div class=" col-md-12 cleartop">
                <table class="table table-striped table-bordered
                                dt-responsive nowrap mt-2" cellspacing="0" cellpadding="4" id="grdOrganizations">
                    <tbody>
                        <tr>
                            <th>Sl No</th>
                            <th>Department
                            </th>
                            <th>Employee Name
                            </th>
                            <th>Gender
                            </th>
                            <th>Designation
                            </th>
                            <th>ID No
                            </th>
                            <th>Time In
                            </th>
                            <th>Time Out
                            </th>
                            <th>Duration
                            </th>
                            <th>Regl Hrs.
                            </th>
                            <th>OT Hrs.
                            </th>
                            <th>Break Hrs.
                            </th>

                        </tr>
                        <ng-container *ngFor="let item of attendancePunchDetails; let i = index">
                            <tr *ngIf="min <= i && max > i" (click)="modifyAttendanceDetails(item)"
                                [class.active]="item.slNo === selectedRowId">
                                <td class="text-align-center">
                                    <span>{{item.slNo}}</span>
                                </td>
                                <td class="text-align-left">
                                    <span>{{item.department}}</span>
                                </td>
                                <td class="text-align-left">
                                    <span>{{item.employeeName}}</span>
                                </td>
                                <td class="text-align-left">
                                    <span>{{item.gender}}</span>
                                </td>
                                <td class="text-align-left">
                                    <span>{{item.designation}}</span>
                                </td>
                                <td class="text-align-right">
                                    <span>{{item.indRegId}}</span>
                                </td>
                                <td class="text-align-right">
                                    <span>{{item.inTime}}</span>
                                </td>
                                <td class="text-align-right">
                                    <span>{{item.outTime}}</span>
                                </td>
                                <td class="text-align-center">
                                    <span>{{item.duration}}</span>
                                </td>
                                <td class="text-align-center">
                                    <!-- <span>{{item.reglHrs}}</span> -->
                                </td>
                                <td class="text-align-center">
                                    <span>{{item.overtime}}</span>
                                </td>
                                <td class="text-align-center">
                                    <!-- <span>{{item.breakHrs}}</span> -->
                                </td>
                            </tr>
                        </ng-container>
                        <tr *ngIf="attendancePunchDetails.length === 0 && dataNotFound">
                            <td class="data_not_found" colspan="10">
                                No Records Exists on this selected Date
                            </td>
                        </tr>
                    </tbody>

                </table>
                <p-paginator [rows]="20" [totalRecords]="attendancePunchDetails.length"
                    (onPageChange)="paginate($event)">
                </p-paginator>
            </div>



        </div>
    </p-accordionTab>
</p-accordion>


<div class="mgt-20 pull-right">

    <div class="row pull-right btSection">
        <div class="col-md12">
            <button pButton type="submit" label="Get Details" class="ui-button-rounded" [disabled]="getDetailFormInput"
                (click)="getAttendanceDetails(attendancePunchDetailsForm.value)" #getDetails></button>
            <button pButton type="submit" label="Manual Attendance" class="ui-button-rounded" [disabled]="manualButton"
                #saveButtonField></button>
            <button pButton type="submit" label="Clear" class="ui-button-rounded" (click)="clearDetail()"></button>

        </div>
    </div>
</div>